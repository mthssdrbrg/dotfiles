#!/usr/bin/env bash
exec docker run -d \
  --rm \
  -v /etc/fonts:/etc/fonts:ro \
  -v /etc/localtime:/etc/localtime:ro \
  -v /tmp/.X11-unix:/tmp/.X11-unix \
  -v $HOME/.Xauthority:/home/spotify/.Xauthority:ro \
  -v $HOME/.config/fontconfig:/home/spotify/.config/fontconfig:ro \
  -v $HOME/.config/spotify:/home/spotify/.config/spotify \
  -v $HOME/.cache/spotify:/home/spotify/.cache/spotify \
  -e DISPLAY \
  --net host \
  --security-opt seccomp:unconfined \
  --device /dev/snd \
  --device /dev/dri \
  --group-add audio \
  --group-add video \
  --user "$(id -u):$(getent group audio | cut -d: -f3)" \
  --name spotify \
  jess/spotify
